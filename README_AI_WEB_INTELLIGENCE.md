# 🌐 AI Web Intelligence Features

## סקירה כללית

הוספנו לסוכן AI יכולות **חיפוש באינטרנט וניתוח מידע חיצוני** לצורך ניתוח מעמיק של השוק, טרנדים, ביקושים ותחרות במלונאות.

## 🎯 יכולות חדשות

### 1. **חיפוש טרנדים בתיירות** (`search_web_for_trends`)

חיפוש מידע באינטרנט על טרנדים בתיירות, תחזיות ביקוש, דפוסים עונתיים ותובנות שוק.

**שימוש:**
```
"מה הטרנדים בתיירות בתל אביב לקיץ 2025?"
"תחזית ביקוש למלונות באילת בפסח"
"What are the hotel demand trends in Jerusalem?"
```

**פרמטרים:**
- `query` (חובה) - שאלת החיפוש בעברית או אנגלית
- `location` (אופציונלי) - מיקום ספציפי
- `timeframe` (אופציונלי) - תקופת זמן (למשל "קיץ 2025", "פסח")

**דוגמת תשובה:**
```json
{
  "success": true,
  "query": "Tel Aviv hotel demand summer 2025",
  "resultsCount": 5,
  "results": [
    {
      "title": "Israel Hotel Market Report 2025",
      "snippet": "Tel Aviv seeing 20% increase in bookings...",
      "url": "https://...",
      "source": "Ministry of Tourism"
    }
  ],
  "summary": "נמצאו 5 תוצאות רלוונטיות..."
}
```

---

### 2. **ניתוח תחרות בשוק** (`analyze_market_competition`)

חיפוש מודיעין תחרותי על מלונות באזור מסוים - אסטרטגיות תמחור, שיעורי תפוסה, פתיחות חדשות, שיפוצים ומיקום בשוק.

**שימוש:**
```
"נתח את התחרות במלונות 5 כוכבים בתל אביב"
"מה המצב התחרותי במלונות ירושלים?"
"Analyze competition for boutique hotels in Tel Aviv"
```

**פרמטרים:**
- `city` (חובה) - עיר או אזור לניתוח
- `hotelCategory` (אופציונלי) - קטגוריית מלון (5-star, boutique, luxury)
- `aspectToAnalyze` (אופציונלי) - היבט ספציפי (pricing, occupancy, renovations)

**דוגמת תשובה:**
```json
{
  "success": true,
  "city": "Tel Aviv",
  "category": "5-star",
  "aspect": "pricing",
  "resultsCount": 6,
  "results": [
    {
      "title": "Tel Aviv Luxury Hotels Pricing 2025",
      "snippet": "Average 5-star hotel rates up 15%...",
      "url": "https://...",
      "relevance": "high"
    }
  ],
  "summary": "נמצאו 6 מקורות מידע רלוונטיים..."
}
```

---

### 3. **תובנות עונתיות** (`get_seasonality_insights`)

קבלת מידע על דפוסים עונתיים, חגים, אירועים וגילוי עונות שיא/שפל שמשפיעות על הביקוש והתמחור.

**שימוש:**
```
"מה הדפוסים העונתיים בישראל ב-2025?"
"תן לי תובנות עונתיות על אילת לחורף"
"Israeli holidays calendar 2025"
```

**פרמטרים:**
- `location` (חובה) - מיקום לניתוח
- `year` (אופציונלי) - שנה לניתוח (ברירת מחדל: שנה נוכחית)
- `monthRange` (אופציונלי) - טווח חודשים (למשל "June-August")

**דוגמת תשובה:**
```json
{
  "success": true,
  "location": "Israel",
  "year": 2025,
  "holidays": [
    {
      "name": "פסח",
      "dates": "12-20 אפריל 2025",
      "type": "חג מרכזי",
      "demand": "גבוה מאוד"
    },
    {
      "name": "חופש הגדול",
      "dates": "יולי-אוגוסט 2025",
      "type": "חופשת קיץ",
      "demand": "גבוה מאוד"
    }
  ],
  "webResults": [...],
  "summary": "מידע עונתי עבור Israel בשנת 2025..."
}
```

**חגים ישראליים מובנים ל-2025:**
- ✅ **פסח** - 12-20 אפריל (ביקוש גבוה מאוד)
- ✅ **שבועות** - 1-3 יוני (ביקוש בינוני-גבוה)
- ✅ **חופש הגדול** - יולי-אוגוסט (ביקוש גבוה מאוד)
- ✅ **ראש השנה** - 22-24 ספטמבר (ביקוש גבוה)
- ✅ **סוכות** - 6-13 אוקטובר (ביקוש גבוה)
- ✅ **חנוכה** - 14-22 דצמבר (ביקוש בינוני)

---

### 4. **מדדי תמחור** (`fetch_pricing_benchmarks`)

שליפת מדדי תעשייה לתמחור, ADR (Average Daily Rate), RevPAR (Revenue Per Available Room) ומדדי ביצועים נוספים.

**שימוש:**
```
"מה ה-ADR הממוצע במלונות תל אביב?"
"תן לי מדדי RevPAR לירושלים"
"Pricing benchmarks for 4-star hotels in Israel"
```

**פרמטרים:**
- `location` (חובה) - מיקום למדדים
- `hotelType` (אופציונלי) - סוג מלון (4-star, 5-star, boutique)
- `metric` (אופציונלי) - מדד ספציפי (ADR, RevPAR, occupancy rate)

**דוגמת תשובה:**
```json
{
  "success": true,
  "location": "Tel Aviv",
  "hotelType": "4-star",
  "metric": "ADR",
  "resultsCount": 5,
  "results": [
    {
      "title": "Tel Aviv Hotel ADR Trends 2025",
      "snippet": "Average daily rate for 4-star hotels: $180-220...",
      "url": "https://...",
      "source": "STR Global"
    }
  ],
  "summary": "נמצאו 5 מקורות מידע..."
}
```

**מדדים נפוצים:**
- **ADR** (Average Daily Rate) - מחיר ממוצע לחדר ליום
- **RevPAR** (Revenue Per Available Room) - הכנסה לחדר זמין
- **Occupancy Rate** - אחוז תפוסה
- **GOPPAR** (Gross Operating Profit Per Available Room) - רווח תפעולי לחדר

---

### 5. **בדיקת אירועים קרובים** (`check_upcoming_events`)

בדיקת אירועים, כנסים, חגים, פסטיבלים או גורמים אחרים שעלולים להשפיע על הביקוש למלונות.

**שימוש:**
```
"מה האירועים הקרובים בתל אביב החודש הבא?"
"תבדוק אירועי ספורט בירושלים ביוני"
"Upcoming conferences in Tel Aviv Q2 2025"
```

**פרמטרים:**
- `location` (חובה) - מיקום לבדיקה
- `startDate` (אופציונלי) - תאריך התחלה (YYYY-MM-DD)
- `endDate` (אופציונלי) - תאריך סיום (YYYY-MM-DD)
- `eventType` (אופציונלי) - סוג אירועים (conferences, festivals, sports)

**דוגמת תשובה:**
```json
{
  "success": true,
  "location": "Tel Aviv",
  "dateRange": "2025-06-01 עד 2025-06-30",
  "eventType": "כל סוגי האירועים",
  "resultsCount": 8,
  "events": [
    {
      "title": "Tel Aviv Tech Conference 2025",
      "snippet": "Major technology conference, 5000+ attendees...",
      "url": "https://...",
      "type": "כנס"
    }
  ],
  "summary": "נמצאו 8 אירועים רלוונטיים..."
}
```

**סוגי אירועים:**
- 🎤 **Conferences** - כנסים ואירועי עסקים
- 🎭 **Festivals** - פסטיבלים ואירועי תרבות
- 🏅 **Sports** - אירועי ספורט
- 🎉 **Holidays** - חגים וחופשות
- 🎵 **Concerts** - הופעות וקונצרטים

---

## 🔧 טכנולוגיה

### WebSearch Tool
- **DuckDuckGo API** - חיפוש ללא צורך ב-API key
- **Fallback System** - מערכת גיבוי אם החיפוש נכשל
- **Smart Context** - תוצאות מותאמות למלונאות ותיירות בישראל

### ארכיטקטורה
```
AI Agent (ai.ts)
    ↓
OpenAI Function Calling
    ↓
executeFunction()
    ↓
WebSearch.search() / WebFetch.fetch()
    ↓
External APIs / Web Sources
```

---

## 📊 דוגמאות שימוש

### דוגמה 1: ניתוח שוק מקיף

**שאלה:**
```
"תנתח את השוק במלונות תל אביב - טרנדים, תחרות ומחירים"
```

**הסוכן יבצע:**
1. ✅ `search_web_for_trends` - חיפוש טרנדים בתל אביב
2. ✅ `analyze_market_competition` - ניתוח תחרות
3. ✅ `fetch_pricing_benchmarks` - מדדי תמחור
4. ✅ `query_hotel_prices` - מחירים פנימיים

**תשובה:**
```
🏨 ניתוח שוק - מלונות תל אביב

📊 TRENDS:
- הביקוש למלונות בתל אביב צפוי לעלות ב-15% ב-Q2 2025
- תיירות עסקית חזרה לרמות לפני COVID
- מגמת עלייה במלונות בוטיק

🎯 COMPETITION:
- 142 מלונות פעילים בתל אביב
- תפוסה ממוצעת: 78% (גבוה מהממוצע הארצי)
- מתחרים עיקריים: Hilton, Dan Hotels, Brown Hotels

💰 PRICING:
- ADR ממוצע: ₪750-950
- RevPAR: ₪585
- המלון שלך מתומחר 5% מעל הממוצע

💡 RECOMMENDATIONS:
בהתבסס על הנתונים, המחיר הנוכחי שלך תחרותי. 
שקול להעלות מחיר ב-3-5% לקראת עונת השיא בקיץ.
```

---

### דוגמה 2: תכנון עונתי

**שאלה:**
```
"מה הציפיות לפסח 2025 באילת?"
```

**הסוכן יבצע:**
1. ✅ `get_seasonality_insights` - מידע על פסח
2. ✅ `check_upcoming_events` - אירועים באילת בפסח
3. ✅ `search_web_for_trends` - תחזיות לפסח

**תשובה:**
```
🌴 תחזית - פסח 2025 באילת (12-20 אפריל)

📅 SEASONALITY:
- פסח הוא עונת שיא באילת
- ביקוש: גבוה מאוד (★★★★★)
- תפוסה צפויה: 95%+

🎉 EVENTS:
- פסטיבל ג'אז באילת (14-16 אפריל)
- מרתון אילת (18 אפריל)
- אירועי חג משפחתיים רבים

💡 PRICING STRATEGY:
- העלה מחירים ב-25-35% מהממוצע
- פתח הזמנות מוקדמות עכשיו
- שקול מינימום 3-4 לילות
- מלאי חזוי להימכר תוך 2-3 שבועות
```

---

### דוגמה 3: החלטת תמחור

**שאלה:**
```
"האם אני צריך להעלות את המחיר לסוף השבוע הבא?"
```

**הסוכן יבצע:**
1. ✅ `query_hotel_prices` - המחירים הנוכחיים שלך
2. ✅ `compare_competitors` - מחירי מתחרים
3. ✅ `check_upcoming_events` - אירועים בסוף השבוע
4. ✅ `get_seasonality_insights` - תובנות עונתיות

**תשובה:**
```
📊 המלצה: כן, העלה מחיר

📈 DATA:
- המחיר הנוכחי שלך: ₪850
- ממוצע מתחרים: ₪920
- אתה מתומחר 8% מתחת לשוק

🎯 DEMAND DRIVERS:
- כנס הייטק גדול בת"א (500+ משתתפים)
- סוף שבוע ללא חג (ביקוש רגיל-גבוה)
- מזג אויר צפוי מעולה

💰 RECOMMENDATION:
- מחיר מומלץ: ₪950 (+12%)
- זה יביא אותך לממוצע השוק
- תפוסה צפויה: 85-90%
- הכנסה נוספת צפויה: ₪2,400
```

---

## 🎓 Best Practices

### 1. **שאלות ספציפיות**
```
✅ GOOD: "מה הטרנדים במלונות בוטיק בתל אביב לקיץ 2025?"
❌ BAD: "תגיד לי על מלונות"
```

### 2. **שלב מספר מקורות**
```
✅ GOOD: "נתח את התחרות במלונות ירושלים ותשווה למחירים שלנו"
(משלב web search + internal data)
```

### 3. **תקופות זמן ברורות**
```
✅ GOOD: "תחזית ביקוש ליוני-אוגוסט 2025"
❌ BAD: "מה יהיה בקיץ?"
```

### 4. **מיקומים מדויקים**
```
✅ GOOD: "תל אביב", "ירושלים", "אילת"
❌ BAD: "הצפון", "המרכז"
```

---

## 🔍 Troubleshooting

### בעיה: "לא נמצאו תוצאות"

**פתרון:**
1. נסה שאלה רחבה יותר
2. בדוק איות (עברית/אנגלית)
3. הוסף מילות מפתח: "hotel", "tourism", "Israel"

**דוגמה:**
```
❌ "מלון xyz במודיעין"
✅ "מלונות במודיעין ביקוש תחזית"
```

---

### בעיה: "תוצאות לא רלוונטיות"

**פתרון:**
1. הוסף מיקום ספציפי
2. הוסף timeframe
3. הגדר את סוג המלון

**דוגמה:**
```
❌ "מחירים"
✅ "מחירי מלונות 4 כוכבים בתל אביב Q2 2025"
```

---

### בעיה: "שגיאה בחיפוש"

**גורמים אפשריים:**
- DuckDuckGo API לא זמין
- בעיית רשת
- Query ארוך מדי

**פתרון:**
- המערכת תעבור אוטומטית למצב fallback
- תקבל תוצאות מבוססות הקשר
- נסה שוב אחרי כמה שניות

---

## 📈 מקורות מידע

### מומלצים:
- ✅ **STR Global** - מדדי תעשייה
- ✅ **משרד התיירות הישראלי** - סטטיסטיקות רשמיות
- ✅ **CBS Israel** - הלמ"ס - נתוני תיירות
- ✅ **Hospitality Net** - חדשות ותובנות
- ✅ **UNWTO** - ארגון התיירות העולמי

### מדדים מרכזיים:
- **ADR** - Average Daily Rate
- **RevPAR** - Revenue Per Available Room
- **Occupancy** - אחוז תפוסה
- **GOPPAR** - Gross Operating Profit Per Available Room

---

## 🚀 עתידיות

תכונות מתוכננות לעתיד:

- [ ] **Google Search API** - חיפוש מתקדם יותר
- [ ] **News API** - חדשות בזמן אמת
- [ ] **Weather API** - השפעת מזג אוויר
- [ ] **Social Media** - sentiment analysis
- [ ] **Flight Data** - נתוני טיסות והזמנות
- [ ] **Competitor Monitoring** - מעקב אוטומטי אחר מתחרים
- [ ] **Predictive ML** - חיזוי ביקוש מבוסס ML

---

## 💡 Tips למנהלי מלונות

### שימוש יומי:
```
בוקר:
- "מה האירועים היום שיכולים להשפיע על הביקוש?"
- "תשווה את המחירים שלי למתחרים היום"

שבועי:
- "נתח את הטרנדים לשבוע הבא"
- "מה צפוי השבוע הבא מבחינת אירועים?"

חודשי:
- "תן לי תחזית ביקוש לחודש הבא"
- "מה המדדים של השוק החודש?"

עונתי:
- "תכנן לי אסטרטגיית תמחור לקיץ"
- "מה הציפיות לחגים?"
```

---

**עודכן:** 2025-11-21  
**גרסה:** 1.0.0  
**סטטוס:** ✅ Production Ready
